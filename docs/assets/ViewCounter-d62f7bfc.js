import{r as o,a7 as v,l as y,j as f,A as l}from"./index-342e1ea1.js";import{T as m}from"./LikeDislike-2ec3950e.js";var p={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"};const x=p;var C=function(t,e){return o.createElement(v,y({},t,{ref:e,icon:x}))},E=o.forwardRef(C);const g=E,h=({itemId:s,increment:t=!1,views:e=0})=>{const[w,a]=o.useState(e),u=o.useRef(!1);return o.useEffect(()=>{t?(async()=>{if(!s||u.current)return;u.current=!0;const i=new l.Query("Views");i.equalTo("itemId",s);try{const r=await i.first();let n;if(r)r.increment("views",1),n=await r.save(null,{fetchWhenSave:!0});else{const d=l.Object.extend("Views"),c=new d;c.set("itemId",s),c.set("views",1),n=await c.save()}a(n.get("views"))}catch(r){console.error("Failed to process views:",r)}})():a(e)},[s,t,e]),f.jsx(m,{icon:f.jsx(g,{}),bordered:!1,style:{backgroundColor:"#fff",color:"rgba(0,0,0,0.45)"},children:t?w:e})},j=h;export{j as V};
